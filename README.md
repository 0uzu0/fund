# LanFund - 基金与市场辅助工具

一个功能完整的基金自选、持仓统计、市场行情与贵金属数据一体化工具，支持 **Web 端** 与 **命令行（CLI）** 双模式，数据可多端同步。

## 主要功能

### 📊 基金管理
- **自选基金**：添加/删除基金，实时查看净值、涨跌幅、连涨/跌、近30天表现
- **持仓统计**：自动计算总持仓金额、今日预估涨跌、实际涨跌、累计收益
- **持仓记录**：记录每次加仓/减仓操作，支持撤销（按交易时间规则）
- **同步加仓/减仓**：按金额或份额同步持仓，自动记录交易时间
- **累计收益修正**：支持手动修正累计收益显示

### 📈 市场行情
- **7×24 快讯**：实时市场资讯
- **全球指数**：全球主要市场指数行情
- **成交量趋势**：A股成交量数据分析
- **上证分时**：实时分时走势图

### 🥇 贵金属
- **实时贵金属**：黄金、白银等实时价格
- **历史金价**：金价历史走势

### 🏢 行业板块
- **板块涨跌**：各行业板块涨跌幅排行
- **板块基金**：查询板块下的相关基金

### 💻 CLI 客户端
- 支持命令行操作，与 Web 端数据同步
- 可选 AI 分析功能（需配置 LLM）

## 快速开始

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 启动 Web 服务

```bash
python fund_server.py
```

访问：`http://localhost:8311`

### 3. CLI 客户端（可选）

首次使用需配置服务器连接：

```bash
python fund.py --init
```

按提示输入服务器地址、用户名、密码。

## 核心特性

- ✅ **多端同步**：Web 端和 CLI 端数据实时同步
- ✅ **实时行情**：自动获取最新基金净值、市场数据
- ✅ **持仓管理**：支持份额、成本、加仓/减仓记录
- ✅ **收益统计**：自动计算预估收益、实际收益、累计收益
- ✅ **数据导出**：支持导出/导入基金配置 JSON
- ✅ **用户权限**：支持多用户，管理员可管理用户

## 项目结构

```
fund/
├── fund_server.py      # Web 服务入口
├── fund.py             # CLI 客户端入口
├── src/
│   ├── database.py     # 数据库操作
│   ├── html/          # HTML 模板
│   └── routes/         # API 路由
├── static/             # 静态资源（CSS/JS）
└── cache/              # 数据缓存
```

## 技术栈

- **后端**：Flask, SQLite
- **前端**：原生 JavaScript, CSS
- **数据源**：基金 API, 市场数据 API
- **可选**：LangChain（AI 分析）

## 免责声明

本工具仅用于数据展示与个人记录，不构成任何投资建议。投资有风险，入市需谨慎。
